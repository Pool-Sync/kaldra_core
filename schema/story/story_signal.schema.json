{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "StorySignal",
    "description": "Extended KALDRA signal with story/narrative analysis (v2.6)",
    "type": "object",
    "required": [
        "signal_id",
        "timestamp"
    ],
    "properties": {
        "signal_id": {
            "type": "string",
            "description": "Unique signal identifier"
        },
        "timestamp": {
            "type": "number",
            "description": "Unix timestamp"
        },
        "delta12": {
            "type": "object",
            "description": "Delta12 vector (archetype probabilities)"
        },
        "delta144": {
            "type": "object",
            "description": "Delta144 state"
        },
        "kindra": {
            "type": "object",
            "description": "Kindra cultural vectors"
        },
        "meta": {
            "type": "object",
            "description": "Meta-engine scores (v2.5)",
            "properties": {
                "nietzsche": {
                    "type": "object"
                },
                "aurelius": {
                    "type": "object"
                },
                "campbell": {
                    "type": "object"
                }
            }
        },
        "tw369": {
            "type": "object",
            "description": "TW369 drift analysis"
        },
        "polarities": {
            "type": "object",
            "description": "Polarity scores (v2.7)",
            "additionalProperties": {
                "type": "number"
            }
        },
        "story": {
            "type": "object",
            "description": "Story/narrative analysis (v2.6)",
            "properties": {
                "narrative_stage": {
                    "type": "string",
                    "description": "Current Campbell stage"
                },
                "arc_progress": {
                    "type": "number",
                    "description": "Arc progress (0.0-1.0)",
                    "minimum": 0,
                    "maximum": 1
                },
                "timeline": {
                    "type": "array",
                    "description": "Recent timeline points",
                    "items": {
                        "type": "object",
                        "properties": {
                            "sequence_id": {
                                "type": "integer"
                            },
                            "timestamp": {
                                "type": "number"
                            },
                            "delta12_dominant": {
                                "type": "string"
                            },
                            "drift_level": {
                                "type": "number"
                            },
                            "polarities": {
                                "type": "object",
                                "description": "Polarity snapshot (v2.7)"
                            }
                        }
                    }
                },
                "inflection_points": {
                    "type": "array",
                    "description": "Detected inflection points",
                    "items": {
                        "type": "object",
                        "properties": {
                            "event_id": {
                                "type": "string"
                            },
                            "inflection_type": {
                                "type": "string"
                            },
                            "magnitude": {
                                "type": "number"
                            },
                            "description": {
                                "type": "string"
                            }
                        }
                    }
                },
                "motion_vectors": {
                    "type": "array",
                    "description": "Narrative motion vectors",
                    "items": {
                        "type": "object",
                        "properties": {
                            "delta12_shift_magnitude": {
                                "type": "number"
                            },
                            "drift_velocity": {
                                "type": "number"
                            },
                            "time_delta": {
                                "type": "number"
                            },
                            "polarity_deltas": {
                                "type": "object",
                                "description": "Polarity changes (v2.7)"
                            }
                        }
                    }
                },
                "drift_trajectory": {
                    "type": "object",
                    "description": "Drift evolution over time",
                    "properties": {
                        "drift_slope": {
                            "type": "number"
                        },
                        "drift_acceleration": {
                            "type": "number"
                        },
                        "drift_volatility": {
                            "type": "number"
                        }
                    }
                },
                "predicted_next_stage": {
                    "type": "string",
                    "description": "Predicted next Campbell stage"
                },
                "tension_trend": {
                    "type": "number",
                    "description": "Tension change (+/-)"
                },
                "transition_likelihood": {
                    "type": "number",
                    "description": "Likelihood of stage transition (0-1)",
                    "minimum": 0,
                    "maximum": 1
                }
            }
        }
    }
}