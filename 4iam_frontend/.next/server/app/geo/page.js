(()=>{var e={};e.id=56,e.ids=[56],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6843:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d}),s(3817),s(1506),s(5866);var a=s(3191),r=s(8716),l=s(7922),n=s.n(l),i=s(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["geo",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3817)),"/Users/niki/Desktop/kaldra_core/4iam_frontend/app/geo/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1506)),"/Users/niki/Desktop/kaldra_core/4iam_frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/niki/Desktop/kaldra_core/4iam_frontend/app/geo/page.tsx"],x="/geo/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/geo/page",pathname:"/geo",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9698:(e,t,s)=>{Promise.resolve().then(s.bind(s,9416))},9416:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(326),r=s(7577),l=s(8494),n=s(8867),i=s(4112);function o(){let[e,t]=(0,r.useState)("Exemplo de comunicado diplom\xe1tico para o KALDRA-GEO."),{text:s,setText:o,data:d,isLoading:c,error:x,run:u}=(0,l.L)(e);return(0,a.jsxs)("main",{className:"flex flex-col gap-6 p-6",children:[(0,a.jsxs)("header",{className:"space-y-1",children:[a.jsx("h1",{className:"text-2xl font-semibold text-slate-50",children:"KALDRA-GEO â€” Geopolitical Radar"}),a.jsx("p",{className:"text-sm text-slate-400",children:"Analise discursos e comunicados geopol\xedticos com o KALDRA CORE."})]}),(0,a.jsxs)("section",{className:"grid gap-4 md:grid-cols-[minmax(0,2fr)_minmax(0,3fr)]",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Geopolitical text"}),a.jsx("textarea",{className:"h-40 w-full rounded-xl border border-slate-800 bg-slate-950/80 p-3 text-sm text-slate-100 outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500",value:s||e,onChange:e=>{o(e.target.value),t(e.target.value)}}),a.jsx("button",{type:"button",onClick:()=>u(),disabled:c,className:"inline-flex items-center justify-center rounded-lg bg-sky-600 px-4 py-2 text-sm font-medium text-white hover:bg-sky-500 disabled:opacity-60",children:c?"Analyzing...":"Generate KALDRA Signal"}),x&&a.jsx("p",{className:"text-xs text-red-400 mt-1",children:x.message||"Unexpected error"})]}),a.jsx("div",{className:"space-y-4",children:d?(0,a.jsxs)(a.Fragment,{children:[a.jsx(n.u,{signal:d}),a.jsx(i.B,{signal:d})]}):a.jsx("div",{className:"rounded-xl border border-dashed border-slate-700 bg-slate-950/60 p-4 text-sm text-slate-400",children:"Nenhum sinal gerado ainda. Envie um texto para ver o radar geopol\xedtico."})})]})]})}},8494:(e,t,s)=>{"use strict";s.d(t,{L:()=>c});var a=s(7577),r=s(9351);class l extends Error{constructor(e,t){super(e),this.name="ApiError",this.status=t}}let n="http://localhost:8000",i=e=>new Promise(t=>setTimeout(t,e));async function o(e,t,s=3){for(let a=0;a<=s;a++)try{let s=new AbortController,a=setTimeout(()=>s.abort(),15e3);try{let r=await fetch(e,{...t,signal:s.signal});if(clearTimeout(a),!r.ok){let e=await r.text().catch(()=>"");throw new l(`API error ${r.status}: ${e||r.statusText}`,r.status)}return await r.json()}finally{clearTimeout(a)}}catch(t){if(a===s)throw t;let e=1e3*Math.pow(2,a);console.warn(`API request failed (attempt ${a+1}/${s+1}), retrying in ${e}ms...`,t),await i(e)}throw new l("Max retries exceeded")}async function d(e){let t=e.trim();if(!t)throw new l("Input text must not be empty.");console.log(`[KALDRA Client] Using real API at ${n} (NEXT_PUBLIC_KALDRA_API_MODE=real)`);try{return await o(`${n}/engine/kaldra/signal`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t})})}catch(e){return console.error("[KALDRA Client] Real API failed, falling back to mock data:",e),(0,r.At)(t)}}function c(e="",t={}){let[s,r]=(0,a.useState)(e),[l,n]=(0,a.useState)(null),[i,o]=(0,a.useState)(!1),[c,x]=(0,a.useState)(null),u=(0,a.useCallback)(async e=>{let t=(e??s).trim();if(t){o(!0),x(null);try{let e=await d(t);n(e)}catch(e){x(e)}finally{o(!1)}}},[s]);return{text:s,setText:r,data:l,isLoading:i,error:c,run:u}}},8867:(e,t,s)=>{"use strict";s.d(t,{u:()=>r});var a=s(326);function r({signal:e}){let t="UNSTABLE"===e.tw_regime?"bg-red-500":"CRITICAL"===e.tw_regime?"bg-amber-500":"bg-emerald-500",s=Math.round(100*e.bias_score),r=Math.round(100*e.confidence);return(0,a.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900/60 p-4 shadow-md space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"KALDRA Signal"}),a.jsx("div",{className:"text-lg font-semibold text-slate-50",children:e.archetype||"Archetype: n/d"}),(0,a.jsxs)("div",{className:"text-xs text-slate-400",children:["Delta state:"," ",a.jsx("span",{className:"font-mono text-slate-200",children:e.delta_state})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[a.jsx("div",{className:"text-xs uppercase text-slate-400",children:"TW Regime"}),(0,a.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full bg-slate-800 px-3 py-1",children:[a.jsx("span",{className:`h-2 w-2 rounded-full ${t}`}),a.jsx("span",{className:"text-xs font-semibold text-slate-50",children:e.tw_regime})]}),e.bias_label&&(0,a.jsxs)("div",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:["Bias: ",e.bias_label]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-xs text-slate-300",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Bias score"}),(0,a.jsxs)("span",{className:"font-mono",children:[s,"%"]})]}),a.jsx("div",{className:"h-1.5 w-full rounded-full bg-slate-800",children:a.jsx("div",{className:"h-1.5 rounded-full bg-fuchsia-500",style:{width:`${s}%`}})})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Confidence"}),(0,a.jsxs)("span",{className:"font-mono",children:[r,"%"]})]}),a.jsx("div",{className:"h-1.5 w-full rounded-full bg-slate-800",children:a.jsx("div",{className:"h-1.5 rounded-full bg-sky-500",style:{width:`${r}%`}})})]})]}),e.narrative_risk&&(0,a.jsxs)("div",{className:"text-[11px] text-slate-400",children:["Narrative risk:"," ",a.jsx("span",{className:"font-semibold text-slate-100",children:e.narrative_risk})]}),a.jsx("p",{className:"text-xs text-slate-400 leading-relaxed",children:e.explanation})]})}},4112:(e,t,s)=>{"use strict";s.d(t,{B:()=>r});var a=s(326);function r({signal:e,maxBars:t=6}){let s=[...Object.entries(e.kindra_distribution||{})].sort((e,t)=>t[1]-e[1]).slice(0,t);if(!s.length)return a.jsx("div",{className:"rounded-xl border border-slate-800 bg-slate-900/40 p-3 text-xs text-slate-400",children:"No Kindra distribution available."});let r=Math.max(...s.map(([,e])=>e));return(0,a.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900/40 p-3 space-y-2",children:[(0,a.jsxs)("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:["Kindra distribution (top ",s.length,")"]}),a.jsx("div",{className:"space-y-1.5",children:s.map(([e,t])=>(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsxs)("div",{className:"flex justify-between text-[11px] text-slate-300",children:[a.jsx("span",{className:"font-mono",children:e}),(0,a.jsxs)("span",{className:"font-mono",children:[Math.round(100*t),"%"]})]}),a.jsx("div",{className:"h-1.5 w-full rounded-full bg-slate-800",children:a.jsx("div",{className:"h-1.5 rounded-full bg-emerald-500",style:{width:`${t/r*100}%`}})})]},e))})]})}},3817:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>l,default:()=>i});var a=s(8570);let r=(0,a.createProxy)(String.raw`/Users/niki/Desktop/kaldra_core/4iam_frontend/app/geo/page.tsx`),{__esModule:l,$$typeof:n}=r;r.default;let i=(0,a.createProxy)(String.raw`/Users/niki/Desktop/kaldra_core/4iam_frontend/app/geo/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[948,892,28],()=>s(6843));module.exports=a})();